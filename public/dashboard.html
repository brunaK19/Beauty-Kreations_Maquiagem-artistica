<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../public/css/style.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Dashboard</title>
</head>

<body>
    <div class="content">
        <div class="dashboard">
            <div class="menuLateral">
                <img src="../public/assets/img/logo.png" alt="">
                <ul>
                    <li><a href="./dashboard.html" style="color: rgb(32, 6, 56);font-weight: bold;">Dashboard</a></li>
                    <li><a href="./aulas.html">Aulas</a></li>
                </ul>

                <a href="./index.html" class="sair" onclick="limparSessao()">Sair</a>
            </div>
            <div class="dados">
                <div class="dash">
                    <span>Nível de conhecimentos dos usuários</span>
                    <div id="graficos">
                        
                        <canvas id="myChart1"></canvas>
                        <canvas id="myChart2"></canvas>
                        <canvas id="myChart3"></canvas>
                    </div>

                    <span>Tipos de maquiagem mais usados</span>
                    <div id="graficos">
                        <canvas id="myChart4"></canvas>
                        <canvas id="myChart5"></canvas>
                        <canvas id="myChart6"></canvas>
                    </div>

                    <span>Mais informações</span>
                    <div class="info">
                        <canvas id="myChart"></canvas>
                        
                            <span>
                                Total de tutoriais <br>
                               <b style="color: rgb(61, 0, 117);"> 12 </b>
                               
                            </span>
                        
                            <span>
                                Comunidade do Discord 
                               <a href ="https://discord.gg/k2CueEyN">Entrar</a> 
                               
                            </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script>

    window.onload = usuarioGrafico(),
        experienciaNovato(),
        experienciaPExperiente(),
        experienciaExperiente(),
        makeBasica(),
        makeGlam(),
        makeHalloween();

    function usuarioGrafico() {
        fetch('http://localhost:3333/usuarios/listar')


            .then(response => response.json())
            .then(data => {

                console.log(data[0].quantidade)
                const ctx = document.getElementById('myChart');


                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Quantidade Usuários'],
                        datasets: [{
                            label: 'Usuários',
                            data: [data[0].quantidade],
                            borderWidth: 1,
                            backgroundColor: 'rgba(148,0,211)'
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                    }
                });

            })
    }

    function experienciaNovato() {
        fetch('http://localhost:3333/perguntas/contarNovato')


            .then(response => response.json())
            .then(data => {

                console.log(data[0].quantidade)
                const ctx = document.getElementById('myChart1');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Novatos'],
                        datasets: [{
                            label: 'Usuários',
                            data: [data[0].quantidade],
                            borderWidth: 1,
                            backgroundColor: 'rgba(148,0,211)',
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false // Defina como false para ocultar a legenda
                            }
                        },
                    },

                });

            })
    }

    function experienciaPExperiente() {
        fetch('http://localhost:3333/perguntas/contarPExperiente')


            .then(response => response.json())
            .then(data => {

                console.log(data[0].quantidade)
                const ctx = document.getElementById('myChart2');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Pouco experientes'],
                        datasets: [{
                            label: 'Usuários',
                            data: [data[0].quantidade],
                            borderWidth: 1,
                            backgroundColor: 'rgba(148,0,211)'
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false // Defina como false para ocultar a legenda
                            }
                        },
                    }
                });

            })
    }

    function experienciaExperiente() {
        fetch('http://localhost:3333/perguntas/contarExperiente')


            .then(response => response.json())
            .then(data => {

                console.log(data[0].quantidade)
                const ctx = document.getElementById('myChart3');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Experientes'],
                        datasets: [{
                            label: 'Usuários',
                            data: [data[0].quantidade],
                            borderWidth: 1,
                            backgroundColor: 'rgba(148,0,211)'
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false // Defina como false para ocultar a legenda
                            }
                        },
                    }
                });

            })
    }

    function makeBasica() {
        fetch('http://localhost:3333/perguntas/makeBasica')


            .then(response => response.json())
            .then(data => {

                console.log(data[0].quantidade)
                const ctx = document.getElementById('myChart4');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Básica'],
                        datasets: [{
                            label: 'Usuários',
                            data: [data[0].quantidade],
                            borderWidth: 1,
                            backgroundColor: 'rgba(148,0,211)'
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false // Defina como false para ocultar a legenda
                            }
                        },
                    }
                });

            })
    }

    function makeGlam() {
        fetch('http://localhost:3333/perguntas/makeGlam')


            .then(response => response.json())
            .then(data => {

                console.log(data[0].quantidade)
                const ctx = document.getElementById('myChart5');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Glam'],
                        datasets: [{
                            label: 'Usuários',
                            data: [data[0].quantidade],
                            borderWidth: 1,
                            backgroundColor: 'rgba(148,0,211)'
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false 
                            }
                        },
                    }
                });

            })
    }

    function makeHalloween() {
        fetch('http://localhost:3333/perguntas/makeHalloween')


            .then(response => response.json())
            .then(data => {

                console.log(data[0].quantidade)
                const ctx = document.getElementById('myChart6');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Halloween'],
                        datasets: [{
                            label: 'Usuários',
                            data: [data[0].quantidade],
                            borderWidth: 1,
                            backgroundColor: 'rgba(148,0,211)'
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false // Defina como false para ocultar a legenda
                            }
                        },
                    }
                });

            })
    }
</script>
